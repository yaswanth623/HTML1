create table student
(
std_id int,
std_name varchar(20),
std_sem int ,
std_roll int ,
std_add varchar(20),
std_phnno int
);


insert into student values(1,'Virat',1,22,'Bangalore',999);
insert into student values(2,'Rohith',1,24,'Mumbai',888);
insert into student values(3,'Dhawan',1,28,'Hyderabad',777);
insert into student values(4,'Rahul',1,54,'Punjab',666);






insert into student values(5,'Pandya',2,22,'Mumbai',555);
insert into student values(6,'Shankar',2,24,'Hyderabad',444);
insert into student values(7,'Pant',2,28,'Delhi',333);
insert into student values(8,'Manish',2,54,'Hyderabad',222);




insert into student values(9,'Bumrah',3,22,'Mumbai',999);
insert into student values(10,'Shami',3,24,'Delhi',888);
insert into student values(11,'Ishant',3,28,'Punjab',777);
insert into student values(12,'Dhoni',3,54,'chennai',666);





insert into student values(13,'Chahal',4,22,'Banglore',555);
insert into student values(14,'Kedar',4,22,'chennai',444);
insert into student values(15,'zaheer',4,28,'Bangalore',333);
insert into student values(16,'Harbhajan',4,24,'Mumbai',222);





insert into student values(17,'Sachin',5,22,'Mumbai',111);
insert into student values(18,'Shewag',5,24,'Delhi',999);
insert into student values(19,'Gambhir',5,28,'kolkata',888);
insert into student values(20,'Raina',5,54,'chennai',777);

insert into student values(21,'Dravid',6,22,'Bangalore',666);
insert into student values(22,'Laxman',6,27,'Delhi',555);
insert into student values(23,'Kumble',6,28,'Bangalore',444);
insert into student values(24,'Yuvaraj',6,54,'Mumbai',333);


create  table attendance
(
stud_Name varchar(20),
stud_id int,
 stud_sem int,
stud_date date,
stud_att varchar(20)
);


-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
CREATING A STUDENT AND ATTENDANCE JAVA CLASS
package com.model;

public class Student {
	protected int stdid ;
	protected String stdname ;
	protected int stdsem;
	protected int stdroll ; 
	protected String stdadd ;
	protected int stdphnno ;
	public int getStdid() {
		return stdid;
	}
	public void setStdid(int stdid) {
		this.stdid = stdid;
	}
	public String getStdname() {
		return stdname;
	}
	public void setStdname(String stdname) {
		this.stdname = stdname;
	}
	public int getStdsem() {
		return stdsem;
	}
	public void setStdsem(int stdsem) {
		this.stdsem = stdsem;
	}
	public int getStdroll() {
		return stdroll;
	}
	public void setStdroll(int stdroll) {
		this.stdroll = stdroll;
	}
	public String getStdadd() {
		return stdadd;
	}
	public void setStdadd(String stdadd) {
		this.stdadd = stdadd;
	}
	public int getStdphnno() {
		return stdphnno;
	}
	public void setStdphnno(int stdphnno) {
		this.stdphnno = stdphnno;
	}
	public Student(int stdid, String stdname, int stdsem, int stdroll, String stdadd, int stdphnno) {
		super();
		this.stdid = stdid;
		this.stdname = stdname;
		this.stdsem = stdsem;
		this.stdroll = stdroll;
		this.stdadd = stdadd;
		this.stdphnno = stdphnno;
	}
	@Override
	public String toString() {
		return "Student [stdid=" + stdid + ", stdname=" + stdname + ", stdsem=" + stdsem + ", stdroll=" + stdroll
				+ ", stdadd=" + stdadd + ", stdphnno=" + stdphnno + "]";
	}
	
	public Student (){
		
		
	}
	

}


package com.model;

import java.sql.Date;

public class Attendance {
	protected String stdname;
	protected int stdid;
	protected int stdsem;
	protected Date datee;
	protected String att;
	public String getStdname() {
		return stdname;
	}
	public void setStdname(String stdname) {
		this.stdname = stdname;
	}
	public int getStdid() {
		return stdid;
	}
	public void setStdid(int stdid) {
		this.stdid = stdid;
	}
	public int getStdsem() {
		return stdsem;
	}
	public void setStdsem(int stdsem) {
		this.stdsem = stdsem;
	}
	public Date getDatee() {
		return datee;
	}
	public void setDatee(Date datee) {
		this.datee = datee;
	}
	public String getAtt() {
		return att;
	}
	public void setAtt(String att) {
		this.att = att;
	}
	@Override
	public String toString() {
		return "Attendance [stdname=" + stdname + ", stdid=" + stdid + ", stdsem=" + stdsem + ", datee=" + datee
				+ ", att=" + att + "]";
	}
	public Attendance(String stdname, int stdid, int stdsem, Date date, String att) {
		super();
		this.stdname = stdname;
		this.stdid = stdid;
		this.stdsem = stdsem;
		this.datee = date;
		this.att = att;
	}
	public Attendance() {}

}

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
CREATING DBUTIL CONNECTION
package com.dbutil;

import java.sql.Connection;
import java.sql.DriverManager;

public class DBConnection {
	public static Connection getConnect()
	{
	try
	{

	Class.forName("oracle.jdbc.OracleDriver");
	Connection con=DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:xe", "dxcfs", "pass");

	return con;
	}
	catch (Exception e) {
	// TODO: handle exception
	e.printStackTrace();
	}

	return null;
	}


}

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
JSP FILE TO SELECT SEM AND ID FOR ATTENDANCE
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>

<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>

</head>
<h2 ><center><p style = "font-family:courier,arial,helvetica;">
Select Semester Here To Mark Attendance</p></center></h2>
<body bgcolor="#f084b6">



<center>
<form action="markAtt">

<select name="sem">
<option value="1"> semester 1 </option>
<option value="2"> semester 2 </option>
<option value="3"> semester 3 </option>
<option value="4"> semester 4 </option>
<option value="5"> semester 5 </option>
<option value="6"> semester 6 </option>




</select>
<button class="pure-button">mark attendance</button>
</form>
</center>

</body>
</html>

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 SERVLET TO TAKE THE DATE FROM JSP FILE
package demo;
import java.io.IOException;
import java.io.PrintWriter;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.util.ArrayList;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

import com.dbutil.DBConnection;
import com.model.Student;


@WebServlet("/markAtt")
public class markAtt extends HttpServlet {

private static final long serialVersionUID = 1L;

	
	protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		
			
			String sem= request.getParameter("sem");
		
			
			try
			{
			
			Connection con=DBConnection.getConnect();
			
			String sql="select * from student where std_sem=?";
			PreparedStatement stat=con.prepareStatement(sql);

			stat.setString(1, sem);
			ResultSet rs = stat.executeQuery();
			
			PrintWriter out= response.getWriter();
			response.setContentType("text/html");
			
			
			out.print("<tr> <td> Stud Id </td> <td> Name </td>  <td> Select </td> </tr><br>");
			String s="<html>";
			s+="<form  action='StudentAtt.jsp'>";
			s+="<input type='submit' >";
			s+="</form>";
			out.println(s);

			ArrayList<Student> studd=new ArrayList<>();
			while(rs.next()) {

      Student std = new Student(rs.getInt("STD_ID"), rs.getNString("STD_NAME"), rs.getInt("STD_SEM"),rs.getInt("STD_ROLL"),rs.getNString("STD_ADD"),rs.getInt("STD_PHNO"));
			studd.add(std);
			out.println(studd);
			}

			HttpSession session= request.getSession();
			session.setAttribute("studd", studd);
			}
			catch(Exception e)
			{
			e.printStackTrace();
			}

			
			}
	}


---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
CALLING THE  JSP TO DISPLAY THE CHECK BOX 
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>

<form action="Stud" >
<table cellspacing="5" cellpadding="0">

<c:forEach var="students" items="${studd}">
<tr>
<td>${students.std_name}</td>
<td>${students.std_id}</td>
<td></td>
<td><input type='checkbox' name='status' value='${students.std_id}'></td>
</tr>
</c:forEach>
</table>
<input type="submit" value="SUBMIT">
</form>


</body>
</html>


------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
CALLING THE SERVLET TO STORE THE PRESENT STUDENT DETAILS





package demo;
import java.io.IOException;
import java.io.PrintWriter;
import java.sql.SQLException;
import java.sql.Date;
import java.util.ArrayList;
import java.util.List;

import javax.servlet.RequestDispatcher;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

import com.dao.StudentDao;
import com.model.Attendance;
import com.model.Student;
import com.sun.jndi.cosnaming.IiopUrl.Address;

@WebServlet("/Stud")
public class Stud extends HttpServlet {
	private static final long serialVersionUID = 1L;
       
   
	protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
	
		PrintWriter out = response.getWriter();
		ArrayList<Student> studentsAll = null;
      
		
		Attendance ad = null;
		long d = System.currentTimeMillis();
		Date date = new Date(d);
		
		String[] names = request.getParameterValues("state");
		HttpSession session = request.getSession();
		if(session != null) {
			studentsAll = (ArrayList) session.getAttribute("students");
		}
		for(String n : names) {
			int sid = Integer.parseInt(n);
			for(Student s : studentsAll) {
				
				if(s.getStdid() == sid) {
					ad= new Attendance(s.getStdname(), s.getStdid(), s.getStdsem(),  datee, "PRESENT");
				}
				
				else {
					ad = new Attendance( s.getStdname(), s.getStdid(), s.getStdsem(),  datee, "ABSENT");
				}
				
				try {
					StudentDao.StudentAtt(ad);
				} 
				catch (SQLException e) {
					e.printStackTrace();
				}
			}
			
		}
		javax.servlet.RequestDispatcher rd=request.getRequestDispatcher("Attd.jsp");
		rd.forward(request, response);
		
		

	}

	
	

}
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
CALLING THE  JSP FILE  TO SET  DATE TO SEE RECORDS
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>jQuery Datepicker: Disable Future Dates</title>
<link rel="stylesheet"
	href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.8.2.js"></script>
<script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>
<script type="text/javascript">
	$(function() {
		var date = new Date();
		var currMonth = date.getMonth();
		var currDate = date.getDate();
		var currYear = date.getFullYear();
		$('#datepicker').datepicker({
			maxDate : new Date(currYear, currMonth, currDate)
		});
	});
</script>

</head>
<body>



<form action="displayattendance">
		Select Semester : <select name="sem">
			<option>Select</option>
			<option value="1">Semester 1</option>
			<option value="2">Semester 2</option>
			<option value="3">Semester 3</option>
			<option value="4">Semester 4</option>
			<option value="5">Semester 5</option>
			<option value="6">Semester 6</option>
		</select>

		<p>
			Date: <input type="text" id="datepicker" name="date" />
		</p>
		<input type="submit" value="Mark attendance Here">


	</form>


</body>
</html>
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
JSP FILE TO LOAD RECORDS
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Attendence </title>
</head>
<body>
<form action="Stud" >
<table cellspacing="5" cellpadding="0">

<c:forEach var="studentsatt" items="${studentsAtt}">
<tr>
<td>${studentsatt.stdname}</td>
<td>${studentsatt.stdid}</td>
<td>${studentsatt.stdsem}</td>
<td>${studentsatt.datee}</td>
<td>${studentsatt.att}</td>
<td></td>
</tr>
</c:forEach>
</table>
<input type="submit" value="SUBMIT">
</form>
</body>
</html>
----------CALLING THE  SERVLET TO DISPLAY THE ATTENDANCE RECORDS OF STUDENTS

package demo;

import java.io.IOException;
import java.io.PrintWriter;
import java.sql.SQLException;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import com.dao.StudentDao;
import com.model.Attendance;
import org.apache.catalina.servlet4preview.RequestDispatcher;

import com.sun.xml.internal.bind.v2.schemagen.xmlschema.List;


@WebServlet("/displayatt")
public class displayattendance extends HttpServlet {
	private static final long serialVersionUID = 1L;
       
   
	protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		int sem = 0;
		List studA = null;
		PrintWriter out = null;

		out = response.getWriter();

		sem = Integer.parseInt(request.getParameter("sem"));
		String sdate = request.getParameter("date").replace('/', '-');
		System.out.println("sdate :  "+sdate);
		long d = System.currentTimeMillis();
		Date date = new Date();

		try {
		studentsA = DisplayAtt.getAttendance(sem, date);
		System.out.print(studentsA);
		request.setAttribute("studentsAtt", studentsA);

                   javax.servlet.RequestDispatcher rd = request.getRequestDispatcher("DispAtt.jsp");
		rd.forward(request, response);
		} 
		catch (SQLException e) {
		
		e.printStackTrace();
		}

		}

	}

	


--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
CALLING THE JSP FILE TO DISPLAY RECORDS
package demo;

import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.List;
import com.model.Attendance;
import com.sun.corba.se.pept.transport.Connection;


public class DisplayAttt {
	private static final String ATT = "select * from attendance where sem =? AND dateOfAtt=?";

	public static List<Attendance> getAttendance(int sem,java.sql.Date date) throws SQLException{
	List<Attendance> students = null;
	Attendance std = null;

	Connection con = (Connection) DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:xe", "dxcfs", "pass");
	            PreparedStatement psmt=((java.sql.Connection) con).prepareStatement(ATT);
	            psmt.setInt(1, sem);
	            psmt.setDate(2, date);
	           
	            ResultSet rs = psmt.executeQuery();
	           
	            students = new ArrayList<Attendance>();
	            while(rs.next()) {
	            std = new Attendance(rs.getString(1), rs.getInt(2), rs.getInt(3), rs.getDate(4), rs.getString(5));
	            students.add(std);
	            }
	           
	return students;
	}

}
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------


package demo;
import java.io.IOException;
import java.io.PrintWriter;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.util.ArrayList;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

import com.dbutil.DBConnection;
import com.model.Student;


@WebServlet("/markAtt")
public class markAtt extends HttpServlet {


private static final long serialVersionUID = 1L;

protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
String sem= request.getParameter("sem");

        try
{
Class.forName("oracle.jdbc.OracleDriver");
Connection con=DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:xe","dxcfs","pass");

String sql="select * from student where std_sem=?";
PreparedStatement stat=con.prepareStatement(sql);
        stat.setString(1, sem);
ResultSet rs=stat.executeQuery();
PrintWriter out=response.getWriter();
ArrayList<String> ids=new ArrayList<>();
String[] datas=request.getParameterValues("status");
while(rs.next())
{
     
       String str = "<html>";
str+="<tr>";
str+="<td>"+ rs.getString("std_id") +"</td>     ";
out.println("   ");
str+="<td>"+ rs.getString("std_name") +"</td>";
str+="<td> <input type='checkbox' name='state' value='"+rs.getString("std_id")+"'> </td><br><br>";
str+="</tr>";
out.println(str);
ids.add(rs.getString(1));
ids.add(rs.getString(2));
ids.add(rs.getString(3));
ids.add(rs.getString(4));
ids.add(rs.getString(5));
ids.add(rs.getString(6));

}
String s="<html>";
s+="<form  action='Att.jsp'>";
s+="<input type='submit'>";
s+="</form>";
out.println(s);

HttpSession session= request.getSession();
session.setAttribute("ids", ids);


}
catch(Exception e)
{

e.printStackTrace();
}


}
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------


package demo;

import java.io.IOException;
import java.io.PrintWriter;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.ArrayList;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

import com.model.Student;



@WebServlet("/Att")
public class Att extends HttpServlet {
	private static final long serialVersionUID = 1L;
       
   
	@Override
	protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {

	String[] datas=req.getParameterValues("status");

	PrintWriter out= resp.getWriter();
	resp.setContentType("text/html");

	HttpSession session= req.getSession();
	
	
		
	ArrayList<String> checkbox=(ArrayList<String>) session.getAttribute("checkbox");
    ArrayList <String> stdd=(ArrayList<String>)session.getAttribute("checkbox");
	out.print("<h2> Attendance Saved !!!!!!!<h2><br>");
	
	for(String data:datas) {
	out.print(data+"<br>");
	}

	out.print("---------------------------------------------------------- <br>");

	out.print(" All Students are as follows <br>");
	for(String std:checkbox) {
	out.print(std+"<br>");
	}
	
	
	out.print("---------------------------------------------------------- <br>");
	
	ArrayList <String> fll=(ArrayList<String>)session.getAttribute("checkbox");
	
	out.print(!(datas.equals(stdd)));
	fll.addAll(stdd);
	
	out.print("Students Absent are as follows<br>");
	for(String fl:fll) {
	out.print(fl+"<br>");
	
	out.print("---------------------------------------------------------- <br>");
	}
	
	

	}

		



	}

